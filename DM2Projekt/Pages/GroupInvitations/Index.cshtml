@page
@model DM2Projekt.Pages.GroupInvitations.IndexModel
@{
    ViewData["Title"] = "My Invitations";
}

<h1>My Pending Group Invitations</h1>

<!-- ✅ Only show error box if there are validation errors -->
@if (!ViewData.ModelState.IsValid)
{
    <div asp-validation-summary="All" class="alert alert-danger"></div>
}

@if (!Model.GroupInvitation.Any())
{
    <p class="text-muted">You have no pending invitations.</p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>Group Name</th>
                <th>Sent At</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var invite in Model.GroupInvitation)
            {
                <tr>
                    <td>@invite.Group.GroupName</td>
                    <td>@invite.SentAt.ToString("g")</td>
                    <td>
                        <form method="post" asp-page-handler="Accept" class="d-inline">
                            <input type="hidden" name="ActionInvitationId" value="@invite.InvitationId" />
                            <button type="submit" class="btn btn-sm btn-success">Accept</button>
                        </form>
                        <form method="post" asp-page-handler="Decline" class="d-inline ms-2">
                            <input type="hidden" name="ActionInvitationId" value="@invite.InvitationId" />
                            <button type="submit" class="btn btn-sm btn-outline-danger">Decline</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
